<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="/fragments/head :: _head('Inicio', 'inicio.css')"></head>

<body>
    <nav th:replace="/fragments/navbar :: _navbar"></nav>
    <div th:replace="fragments/error_exito :: _error_exito"></div> <!--agregado-->

    <div class="titulo">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-houses"
            viewBox="0 0 16 16">
            <path
                d="M5.793 1a1 1 0 0 1 1.414 0l.647.646a.5.5 0 1 1-.708.708L6.5 1.707 2 6.207V12.5a.5.5 0 0 0 .5.5.5.5 0 0 1 0 1A1.5 1.5 0 0 1 1 12.5V7.207l-.146.147a.5.5 0 0 1-.708-.708L5.793 1Zm3 1a1 1 0 0 1 1.414 0L12 3.793V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v3.293l1.854 1.853a.5.5 0 0 1-.708.708L15 8.207V13.5a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 4 13.5V8.207l-.146.147a.5.5 0 1 1-.708-.708L8.793 2Zm.707.707L5 7.207V13.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V7.207l-4.5-4.5Z" />
        </svg>
        <h1>Alquileres de Quinchos para Fiestas</h1>
    </div>

    <div class="album">

        <div class="container p-5 bg-light bg-opacity-50">

            <div class="row">

                <div class="col-md-4 mb-4 d-flex justify-content-center" th:each="propiedad : ${propiedades}">

                    <div class="card shadow" style="width: 18rem">


                        <footer th:replace="/fragments/carousel_generico :: _carousel_propiedades"></footer>


                        <div class="card-body">
                            <h5 class="card-title" th:text="${propiedad.nombre}"></h5>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item" th:text="${propiedad.ciudad}"></li>
                            <li class="list-group-item" th:text="${propiedad.precio_base}"></li>
                            <li class="list-group-item"
                                th:text="${propiedad.propietario.nombre} + ' ' + ${propiedad.propietario.apellido}">
                            </li>
                        </ul>
                        <div class="card-body">
                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                th:attr="data-target='#__${propiedad.id}__'+'ModalCard'">
                                Ver más
                            </button>

                            <!-- Al hacer click en ver más muestra esto. -->
                            <div class="modal fade" th:id="__${propiedad.id}__+'ModalCard'" tabindex="-1" role="dialog">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="card-title" th:text="${propiedad.nombre}"></h5>
                                            <button type="button" class="btn-close" data-dismiss="modal">
                                            </button>
                                        </div>

                                        <div class="modal-body">

                                            <div th:id="__${propiedad.id}__ + 'modal'" class="carousel slide"
                                                data-interval="false">
                                                <div class="carousel-inner ">

                                                    <div th:each="imagen, iterstat: ${propiedad.fotos}"
                                                        th:class="${iterstat.first} ? 'carousel-item active':'carousel-item' ">
                                                        <img class="d-block w-100 rounded p-1"
                                                            th:src=" @{/imagen/__${imagen.id}__}" alt="slide">
                                                    </div>

                                                </div>

                                                <button class="carousel-control-prev" type="button"
                                                    th:attr="data-bs-target='#__${propiedad.id}__' + 'modal'"
                                                    data-bs-slide="prev">
                                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                    <span class="visually-hidden">Previous</span>
                                                </button>

                                                <button class="carousel-control-next" type="button"
                                                    th:attr="data-bs-target='#__${propiedad.id}__' + 'modal'"
                                                    data-bs-slide="next">
                                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                    <span class="visually-hidden">Next</span>
                                                </button>

                                            </div>

                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item" th:text="${propiedad.ciudad}"></li>
                                                <li class="list-group-item" th:text="${propiedad.precio_base}"></li>
                                                <li class="list-group-item"
                                                    th:text="${propiedad.propietario.nombre} + ' ' + ${propiedad.propietario.apellido}">
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Volver</button>
                                            <button type="button" class="btn btn-primary">Reservar</button>
                                        </div>
                                        <div id="accordion">
                                            <div class="card">
                                                <div class="card-header" id="headingOne">
                                                    <h5 class="mb-0">
                                                        <button class="btn btn-link" data-toggle="collapse"
                                                            data-target="#collapse"
                                                            th:attr="data-target='#__${propiedad.id}__' + 'Collapse'"
                                                            aria-expanded="true" aria-controls="collapseOne">
                                                            Comentarios
                                                        </button>
                                                    </h5>
                                                </div>

                                                <div th:id="'__${propiedad.id}__' + 'Collapse'" class="collapse" aria-labelledby="headingOne"
                                                    data-parent="#accordion">
                                                    <div class="card-body">
                                                        <!-- Agregar usuario y comentario hasta 3 lineas, y boton de ver comentarios -->
                                                        Anim pariatur cliche reprehenderit, enim eiusmod high life
                                                        accusamus terry richardson ad squid. 3 wolf moon officia
                                                        aute, non cupidatat skateboard dolor brunch. Food truck
                                                        quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor,
                                                        sunt aliqua put a bird on it squid single-origin coffee
                                                        nulla assumenda shoreditch et. Nihil anim keffiyeh
                                                        helvetica, craft beer labore wes anderson cred nesciunt
                                                        sapiente ea proident. Ad vegan excepteur butcher vice lomo.
                                                        Leggings occaecat craft beer farm-to-table, raw denim
                                                        aesthetic synth nesciunt you probably haven't heard of them
                                                        accusamus labore sustainable VHS.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Fin del modal -->

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>


    <footer th:replace="/fragments/footer :: _footer"></footer>

</body>

</html>